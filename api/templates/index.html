<!DOCTYPE html>
<html lang="en-gb">

<head>
    <title>Watch List</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="{{ url_for('static', filename='js/index.js') }}"></script>
</head>

<body>
    <header class="websiteTitle">
        <h1>Watch list</h1>
        {% if name=="" %}
        <div class="header">
            <h2>This is demo version.</h2>
            <div class="logins">
                <a href='login'>Log in</a> or <a href='createAccount'>Create account</a> to get full functionality.
            </div>
        </div>
        {% else %}
        <div class="header">
            <h2>Welcome, {{ name }}</h2>
            <div class="logins">
                <a href='logout'>Log out</a>
            </div>
        </div>
        {% endif %}
    </header>
    <section class="list">
        <form class="listing" action="/modify" method="post">
            <button class="add" type="button" onclick=addNew(this)>+</button>
        </form>
        <form class="listing" action="/modify" method="post" style="display: none;">
            <div class="basic" onclick=showAdvanced(this)>
                <input class="hid" name="hid" value="">
                <input disabled class="basicInfo title" value="" name="title">
                <select class="basicInfo status" disabled onchange=changeColour(this) style="background-color:green"
                    name="status">
                    <option value="watching" selected>watching</option>
                    <option value="paused">paused</option>
                    <option value="waiting">waiting</option>
                    <option value="rewatch">rewatch</option>
                    <option value="finished">finished</option>
                    <option value="dropped">dropped</option>
                </select>
                <select class="basicInfo rating" disabled name="rating">
                    <option value="0" selected></option>
                    {% for j in ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10"] %}
                    <option value={{j}}>{{j}}</option>
                    {% endfor %}
                    <select>
            </div>
            <div class="advanced showAdvanced">
                <a class="wikiLink adv">wiki</a>
                <input class="wikiLinkInput adv" name="wikiLink">
                <a class="trailer adv">trailer</a>
                <input class="trailerInput adv" name="trailer">
                <textarea name="description" disabled class="description adv"></textarea>
                <button type="button" class="edit adv" onclick=toEdit(this)>EDIT</button>
                <button type="submit" name="act" value="save" class="save adv">SAVE</button>
                <button type="submit" name="act" value="remove" class="remove adv">REMOVE</button>
                <button type="button" class="cancel adv" onclick=removeThis(this)>CANCEL</button>
            </div>
        </form>
        {%for i in data%}

        <form class="listing" action="/modify" method="post">
            <div class="basic" onclick=showAdvanced(this)>
                <input class="hid" name="hid" value={{i["_id"]}}>
                <input disabled class="basicInfo title" value='{{i["title"]}}' name="title">
                {% set colours = {"watching": "green;", "waiting": "yellow;", "rewatch": "blue;", "finished": "green;",
                "dropped": "red;", "paused": "purple;"} %}
                <select class="basicInfo status" disabled onchange=changeColour(this)
                    style="background-color:{{colours[i['status']]}}" name="status">
                    <option value="watching" {% if i["status"]=="watching" %} selected {% endif %}>
                        watching</option>
                    <option value="paused" {% if i["status"]=="paused" %} selected {% endif %}>
                        paused</option>
                    <option value="waiting" {% if i["status"]=="waiting" %} selected {% endif %}>
                        waiting</option>
                    <option value="rewatch" {% if i["status"]=="rewatch" %} selected {% endif %}>
                        rewatch</option>
                    <option value="finished" {% if i["status"]=="finished" %} selected {% endif %}>
                        finished</option>
                    <option value="dropped" {% if i["status"]=="dropped" %} selected {% endif %}>
                        dropped</option>
                </select>
                <select class="basicInfo rating" disabled name="rating">
                    <option value="0"></option>
                    {% for j in ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10"] %}
                    {% if i["rating"] == j %}
                    <option value={{j}} selected>{{j}}</option>
                    {% else %}
                    <option value={{j}}>{{j}}</option>
                    {% endif %}
                    {% endfor %}
                    <select>
            </div>
            <div class="advanced">
                <a class="wikiLink adv" {% if i["wiki"] !="" %} href='{{i["wiki"]}}'>
                    wiki
                    {% else %}
                    >wiki
                    {% endif %}
                </a>
                <input class="wikiLinkInput adv" value='{{i["wiki"]}}' name="wikiLink">
                <a class="trailer adv" {% if i["trailer"] !="" %} href='{{i["trailer"]}}'>
                    trailer
                    {% else %}
                    >trailer
                    {% endif %}
                </a>
                <input class="trailerInput adv" value='{{i["trailer"]}}' name="trailer">
                <textarea name="description" disabled class="description adv">{{i["description"]}}</textarea>
                <button type="button" class="edit adv" onclick=toEdit(this)>EDIT</button>
                <button type="submit" name="act" value="save" class="save adv">SAVE</button>
                <button type="submit" name="act" value="remove" class="remove adv">REMOVE</button>
                <button type="button" class="cancel adv" onclick=cancel(this)>CANCEL</button>
            </div>
        </form>
        {%endfor%}
    </section>
</body>

</html>